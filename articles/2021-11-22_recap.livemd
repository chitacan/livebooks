# 2021-11-22 Elixir Team Weekly Recap

## setup

```elixir
Mix.install(
  [
    {:algae, "~> 1.3", override: true, app: false},
    {:quark, "~> 2.3", override: true, app: false},
    {:type_class, "~> 1.2", override: true, app: false},
    {:exceptional, "~> 2.1", override: true, app: false},
    {:operator, "~> 0.2", override: true, app: false},
    {:witchcraft, git: "https://github.com/jechol/witchcraft.git", override: true, app: false}
  ]
  # force: true
)
```

```elixir
use Witchcraft
alias Algae.Either.Right
alias Algae.Either.Left
```

## chain do â¡ï¸ monad %Right

chain ê³¼ monad ëŠ” ê±°ì˜ ê°™ì€ ê¸°ëŠ¥ì„ í•œë‹¤. ë‹¤ë§Œ monad ì˜ ê²½ìš° return ì„ ì‚¬ìš©í•˜ë©´, return ì˜ ê°’ì„ monad ì— ëª…ì‹œëœ íƒ€ì…ì— ë„£ì–´ì¤€ë‹¤.

```elixir
chain do
  Right.new(10)
  Right.new(20)
  val <- Right.new(30)
  val
end
```

```elixir
monad [] do
  Right.new(10)
  Right.new(20)
  val <- Right.new(30)
  val
end
```

```elixir
monad %Right{} do
  Right.new(10)
  Right.new(20)
  val <- Right.new(30)
  return(val)
end
```

ì²´ì´ë‹ ì¤‘ê°„ì— `%Left{}` ê°€ ìˆìœ¼ë©´, `%Left{}` ê°€ ê·¸ëŒ€ë¡œ ë¦¬í„´ëœë‹¤.

```elixir
monad %Right{} do
  Right.new(10)
  Left.new(20)
  val <- Right.new(30)
  return(val)
end
```

## traverse

traverse_async ê°€ ë””í´íŠ¸ê°€ ë˜ì—ˆë‹¤.

## reader.run

reader ë¥¼ í™œìš©í•˜ëŠ” ì¼€ì´ìŠ¤ë¥¼ ìŠì–´ë²„ë¦° ê²ƒ ê°™ë‹¤. ë‹¤ì‹œ ì—°ìŠµí•´ë³´ì

```elixir
defmodule Hello do
  use Witchcraft
  import Algae.Reader

  def world do
    monad %Algae.Reader{} do
      env <- ask()
      let(val = Map.get(env, :val, false))
      return(val)
    end
  end
end
```

```elixir
Hello.world()
|> Algae.Reader.run(%{val: true})
```

## Weird chain macro

ì™œ ì¸ì§€ëŠ” ëª¨ë¥´ê² ì§€ë§Œ, livebook ì—ì„œ `chain` ë§¤í¬ë¡œë¥¼ 1ë²ˆ ì´ìƒ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.
2ë²ˆì§¸ ë¶€í„°ëŠ” ì •ì˜ê°€ ë˜ì–´ìˆì§€ ì•Šë‹¤ëŠ” ì´ìƒí•œ ì—ëŸ¬ ë©”ì‹œì§€ê°€ ì¶œë ¥ë˜ë©°, ë‹¤ì‹œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” `use Witchcraft` ë¥¼ í•œë²ˆë” ì‹¤í–‰í•´ì•¼ í•˜ê±°ë‚˜, `Witchcraft.Chain.chain` ê°™ì€ ì™„ì „í•œ í˜•íƒœë¡œ ì¨ì¤˜ì•¼ í•œë‹¤.

```elixir
chain do
  Right.new(10)
end
```

```elixir
Witchcraft.Chain.chain do
  Right.new(10)
end
```

í  ê·¸ëŸ°ë°, ìƒˆë¡œìš´ ë…¸íŠ¸ë¶ì„ ë§Œë“¤ì–´ì„œ witchcraft ì˜ì¡´ì„±ë§Œ ì„¤ì¹˜í–ˆë”ë‹ˆ, ë¬¸ì œì—†ì´ `chain` ë§¤í¬ë¡œë¥¼ ê³„ì† ì‚¬ìš©í•  ìˆ˜ ìˆì—ˆë‹¤.
algae ì˜ ë¬¸ì œì¸ ê²ƒì¼ê¹Œ?

<!-- livebook:{"force_markdown":true} -->

```elixir
Mix.install(
  [
    {:witchcraft, git: "https://github.com/witchcrafters/witchcraft.git", override: true},
  ],
  force: true
)
```

ì•„ì•—, ì˜ì¡´ì„±ì„ ì•„ë˜ì™€ ê°™ì´ ì„¤ì¹˜í–ˆë”ë‹ˆ ì˜ ë™ì‘í•œë‹¤. ì´ ë…¸íŠ¸ë¶ì˜ ì˜ì¡´ì„±ì€ ì˜ëª» ì„¤ì¹˜ëœ ê²ƒ ğŸ˜…
force ì˜µì…˜ì„ ì œê±°í•˜ë©´, ìºì‹œë¥¼ í™œìš©í•  ìˆ˜ ìˆë‹¤.

<!-- livebook:{"force_markdown":true} -->

```elixir
Mix.install(
  [
    {:witchcraft, git: "https://github.com/witchcrafters/witchcraft.git", override: true},
    {:algae, "~> 1.3"}
  ],
  force: true
)
```
